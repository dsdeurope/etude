{"ast":null,"code":"import _objectSpread from\"/app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import ApiControlPanel from'./ApiControlPanel';// ANCIEN COMPOSANT SUPPRIMÉ - Utilise ApiControlPanel centralisé\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const ApiStatusButton_OLD_REMOVED=()=>{const[apiStatus,setApiStatus]=useState(null);const[isOpen,setIsOpen]=useState(false);const[showTooltip,setShowTooltip]=useState(false);// Configuration du backend\nconst getBackendUrl=()=>{if(process.env.REACT_APP_BACKEND_URL){return process.env.REACT_APP_BACKEND_URL;}const hostname=window.location.hostname;if(hostname===\"localhost\"||hostname===\"127.0.0.1\")return\"http://localhost:8001\";return\"https://rubrique-study.preview.emergentagent.com\";};const BACKEND_URL=getBackendUrl();// Fonction pour récupérer le statut des API\nconst fetchApiStatus=async()=>{try{const response=await fetch(\"\".concat(BACKEND_URL,\"/api/health\"));if(response.ok){const healthData=await response.json();const adaptedStatus={timestamp:new Date().toISOString(),apis:{gemini_1:{color:'green',name:'Gemini Key 1',status:'active'},gemini_2:{color:'green',name:'Gemini Key 2',status:'active'},gemini_3:{color:'green',name:'Gemini Key 3',status:'active'},gemini_4:{color:'green',name:'Gemini Key 4',status:'active'},bible_api:{color:healthData.bible_api_configured?'green':'red',name:'Bible API',status:healthData.bible_api_configured?'active':'inactive'}},active_api:healthData.current_key||'gemini_1'};setApiStatus(adaptedStatus);}}catch(error){console.error('[API STATUS] Erreur:',error);}};const getLedColor=api=>{return api.color==='green'?'#00ff00':'#ff0000';};useEffect(()=>{fetchApiStatus();const interval=setInterval(fetchApiStatus,10000);return()=>clearInterval(interval);},[]);return/*#__PURE__*/_jsxs(\"div\",{style:{position:'relative',display:'inline-block'},children:[/*#__PURE__*/_jsx(\"style\",{children:\"\\n          @keyframes pulse-green {\\n            0%, 100% { \\n              box-shadow: 0 0 8px #00ff00, 0 0 16px #00ff00; \\n              opacity: 1; \\n            }\\n            50% { \\n              box-shadow: 0 0 12px #00ff00, 0 0 24px #00ff00; \\n              opacity: 0.8; \\n            }\\n          }\\n          @keyframes pulse-red {\\n            0%, 100% { \\n              box-shadow: 0 0 8px #ff0000, 0 0 16px #ff0000; \\n              opacity: 1; \\n            }\\n            50% { \\n              box-shadow: 0 0 12px #ff0000, 0 0 24px #ff0000; \\n              opacity: 0.4; \\n            }\\n          }\\n          .api-tooltip {\\n            position: absolute;\\n            top: -40px;\\n            left: 50%;\\n            transform: translateX(-50%);\\n            background: rgba(0,0,0,0.9);\\n            color: white;\\n            padding: 6px 12px;\\n            borderRadius: 8px;\\n            fontSize: 10px;\\n            whiteSpace: nowrap;\\n            zIndex: 1001;\\n            opacity: 0;\\n            transition: opacity 0.3s ease;\\n          }\\n          .api-tooltip.visible {\\n            opacity: 1;\\n          }\\n        \"}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setIsOpen(!isOpen),style:{background:'linear-gradient(135deg, #3742fa, #2f3542)',border:'none',borderRadius:'10px',color:'white',padding:'8px 14px',fontSize:'12px',fontWeight:'600',cursor:'pointer',transition:'all 0.3s ease',boxShadow:'0 3px 10px rgba(55, 66, 250, 0.3)',fontFamily:'Montserrat, sans-serif',display:'flex',alignItems:'center',gap:'8px',position:'relative',overflow:'hidden'},onMouseOver:e=>{e.target.style.transform='translateY(-1px)';e.target.style.boxShadow='0 4px 15px rgba(55, 66, 250, 0.4)';setShowTooltip(true);},onMouseOut:e=>{e.target.style.transform='translateY(0px)';e.target.style.boxShadow='0 3px 10px rgba(55, 66, 250, 0.3)';setShowTooltip(false);},children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\u26A1 API\"}),apiStatus&&/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'4px',background:'rgba(255,255,255,0.15)',padding:'2px 6px',borderRadius:'6px'},children:[/*#__PURE__*/_jsx(\"div\",{style:{width:'6px',height:'6px',borderRadius:'50%',backgroundColor:Object.values(apiStatus.apis).every(api=>api.color==='green')?'#00ff00':'#ff0000',animation:Object.values(apiStatus.apis).every(api=>api.color==='green')?'pulse-green 2s infinite':'pulse-red 1s infinite'}}),/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',gap:'2px'},children:Object.entries(apiStatus.apis).map(_ref=>{let[key,api]=_ref;return/*#__PURE__*/_jsx(\"div\",{style:{width:'4px',height:'4px',borderRadius:'50%',backgroundColor:getLedColor(api),animation:api.color==='green'?'pulse-green 2s infinite':'pulse-red 1s infinite'},title:\"\".concat(api.name,\": \").concat(api.status)},key);})})]}),showTooltip&&apiStatus&&/*#__PURE__*/_jsx(\"div\",{className:\"api-tooltip \".concat(showTooltip?'visible':''),children:Object.values(apiStatus.apis).every(api=>api.color==='green')?'🟢 Toutes les API sont opérationnelles':'🔴 Certaines API ont des problèmes'})]}),isOpen&&/*#__PURE__*/_jsxs(\"div\",{style:{position:'absolute',top:'100%',right:'0',marginTop:'10px',background:'rgba(255, 255, 255, 0.95)',backdropFilter:'blur(10px)',border:'1px solid rgba(255, 255, 255, 0.2)',borderRadius:'12px',padding:'16px',minWidth:'280px',boxShadow:'0 10px 30px rgba(0,0,0,0.2)',zIndex:1000},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center',marginBottom:'12px',borderBottom:'1px solid rgba(0,0,0,0.1)',paddingBottom:'8px'},children:[/*#__PURE__*/_jsx(\"h4\",{style:{margin:0,color:'#333',fontSize:'14px',fontWeight:'bold'},children:\"\\uD83D\\uDD27 Statut des API\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setIsOpen(false),style:{background:'none',border:'none',fontSize:'16px',cursor:'pointer',color:'#666'},children:\"\\xD7\"})]}),apiStatus&&/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'12px'},children:Object.entries(apiStatus.apis).map(_ref2=>{let[key,api]=_ref2;return/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',justifyContent:'space-between',padding:'6px 0',borderBottom:'1px solid rgba(0,0,0,0.05)'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'8px'},children:[/*#__PURE__*/_jsx(\"div\",{style:{width:'8px',height:'8px',borderRadius:'50%',backgroundColor:getLedColor(api),animation:api.color==='green'?'pulse-green 2s infinite':'pulse-red 1s infinite'}}),/*#__PURE__*/_jsx(\"span\",{style:{color:'#333',fontWeight:'500'},children:api.name})]}),/*#__PURE__*/_jsx(\"span\",{style:{color:api.color==='green'?'#059669':'#dc2626',fontSize:'11px',fontWeight:'600'},children:api.color==='green'?'✅ OK':'❌ ERR'})]},key);})}),/*#__PURE__*/_jsx(\"button\",{onClick:fetchApiStatus,style:{marginTop:'12px',width:'100%',padding:'8px',background:'linear-gradient(135deg, #3742fa, #2f3542)',color:'white',border:'none',borderRadius:'8px',fontSize:'12px',fontWeight:'600',cursor:'pointer'},children:\"\\uD83D\\uDD04 Rafra\\xEEchir\"})]})]});};// Configuration du backend - utilise la variable d'environnement\nconst getBackendUrl=()=>{if(process.env.REACT_APP_BACKEND_URL){return process.env.REACT_APP_BACKEND_URL;}const hostname=window.location.hostname;if(hostname===\"localhost\"||hostname===\"127.0.0.1\")return\"http://localhost:8001\";return\"https://rubrique-study.preview.emergentagent.com\";};const BACKEND_URL=getBackendUrl();const API_BASE=\"\".concat(BACKEND_URL.replace(/\\/+$/g,\"\"),\"/api\");const VersetParVersetPage=_ref3=>{let{onGoBack,content,bookInfo}=_ref3;const[currentBatch,setCurrentBatch]=useState(1);// Batch actuel (1, 2, 3...)\nconst[isLoadingMore,setIsLoadingMore]=useState(false);const[allVersetsBatches,setAllVersetsBatches]=useState({});// Stocke tous les batches chargés\nconst[totalVersetsExpected,setTotalVersetsExpected]=useState(null);const[enrichingVersets,setEnrichingVersets]=useState({});// Track quels versets sont en cours d'enrichissement\nuseEffect(()=>{// Quand le contenu arrive, le stocker comme batch 1\nif(content){setAllVersetsBatches(prev=>_objectSpread(_objectSpread({},prev),{},{1:content}));setCurrentBatch(1);}},[content]);// Fonction pour enrichir une explication théologique spécifique avec Gemini\nconst enrichirExplicationGemini=async(versetNumber,currentExplication,versetText)=>{const enrichKey=\"\".concat(currentBatch,\"-\").concat(versetNumber);if(enrichingVersets[enrichKey])return;// Déjà en cours\nsetEnrichingVersets(prev=>_objectSpread(_objectSpread({},prev),{},{[enrichKey]:true}));try{console.log(\"[GEMINI ENRICHISSEMENT] Enrichissement verset \".concat(versetNumber,\" batch \").concat(currentBatch));const apiUrl=\"\".concat(API_BASE,\"/generate-verse-by-verse\");const prompt=\"ENRICHISSEMENT TH\\xC9OLOGIQUE APPROFONDI\\n\\nVerset biblique : \\\"\".concat(versetText,\"\\\"\\nExplication actuelle : \\\"\").concat(currentExplication,\"\\\"\\n\\nMISSION : Enrichir et approfondir cette explication th\\xE9ologique avec 200-300 mots suppl\\xE9mentaires.\\n\\nAJOUTE :\\n- Contexte historique et culturel\\n- Liens avec d'autres passages bibliques\\n- Implications doctrinales profondes\\n- Applications pratiques modernes\\n- Perspectives herm\\xE9neutiques\\n\\nCONSERVE le texte original ET enrichis-le substantiellement.\\n\\nG\\xC9N\\xC8RE DIRECTEMENT l'explication enrichie compl\\xE8te :\");const response=await fetch(apiUrl,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({passage:\"Enrichissement th\\xE9ologique\",version:'LSG',tokens:300,use_gemini:true,enriched:true,custom_prompt:prompt})});if(!response.ok)throw new Error(\"Erreur API: \".concat(response.status));const data=await response.json();if(data.content){// Remplacer l'explication dans le batch actuel\nconst currentBatchContent=allVersetsBatches[currentBatch];const versetPattern=new RegExp(\"(VERSET \".concat(versetNumber,\"[\\\\s\\\\S]*?EXPLICATION TH\\xC9OLOGIQUE[\\\\s\\\\S]*?:)([\\\\s\\\\S]*?)(?=VERSET|$)\"),'i');const enrichedExplication=data.content.replace(/.*EXPLICATION THÉOLOGIQUE.*?:/i,'').trim();const enrichedContent=currentBatchContent.replace(versetPattern,\"$1\\n\".concat(enrichedExplication,\"\\n\"));// Mettre à jour le batch avec le contenu enrichi\nsetAllVersetsBatches(prev=>_objectSpread(_objectSpread({},prev),{},{[currentBatch]:enrichedContent}));console.log(\"[GEMINI ENRICHISSEMENT] Verset \".concat(versetNumber,\" enrichi avec succ\\xE8s\"));}}catch(error){console.error(\"[GEMINI ENRICHISSEMENT] Erreur verset \".concat(versetNumber,\":\"),error);}finally{setEnrichingVersets(prev=>_objectSpread(_objectSpread({},prev),{},{[enrichKey]:false}));}};// Fonction pour charger le batch suivant (versets 6-10, 11-15, etc.)\nconst loadNextBatch=async()=>{if(isLoadingMore)return;const nextBatch=currentBatch+1;// Si on a déjà ce batch en cache, l'afficher directement\nif(allVersetsBatches[nextBatch]){setCurrentBatch(nextBatch);return;}setIsLoadingMore(true);try{// Calculer le range de versets à demander\nconst startVerse=(nextBatch-1)*5+1;// Batch 2 = versets 6-10, etc.\nconst endVerse=startVerse+4;// Extraire le livre et chapitre du bookInfo\nconst bookChapter=(bookInfo===null||bookInfo===void 0?void 0:bookInfo.split(':')[0])||'Genèse 1';const requestPassage=\"\".concat(bookChapter,\":\").concat(startVerse,\"-\").concat(endVerse);console.log(\"[PAGINATION] Chargement batch \".concat(nextBatch,\": \").concat(requestPassage));// Appeler l'API pour les versets suivants\nconst apiUrl=\"\".concat(API_BASE,\"/generate-verse-by-verse\");const response=await fetch(apiUrl,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({passage:requestPassage,version:'LSG',tokens:500,use_gemini:true,enriched:true})});if(!response.ok){throw new Error(\"Erreur API: \".concat(response.status));}const data=await response.json();if(data.content){// Stocker le nouveau batch\nsetAllVersetsBatches(prev=>_objectSpread(_objectSpread({},prev),{},{[nextBatch]:data.content}));setCurrentBatch(nextBatch);console.log(\"[PAGINATION] Batch \".concat(nextBatch,\" charg\\xE9 avec succ\\xE8s\"));}else{throw new Error('Pas de contenu reçu');}}catch(error){console.error(\"[PAGINATION] Erreur chargement batch \".concat(nextBatch,\":\"),error);// Optionnel : afficher une erreur à l'utilisateur\n}finally{setIsLoadingMore(false);}};// Fonction pour naviguer vers un batch précédent\nconst goToPreviousBatch=()=>{if(currentBatch>1){setCurrentBatch(currentBatch-1);}};// Obtenir le contenu du batch actuel\nconst getCurrentBatchContent=()=>{return allVersetsBatches[currentBatch]||'';};// Fonction pour gérer l'enrichissement d'un verset via React (pas via HTML onclick)\nconst handleEnrichirVerset=async versetNumber=>{console.log(\"[GEMINI] Clic enrichissement verset \".concat(versetNumber));// Extraire le texte du verset et l'explication actuelle\nconst currentContent=getCurrentBatchContent();const versetRegex=new RegExp(\"VERSET \".concat(versetNumber,\"[\\\\s\\\\S]*?TEXTE BIBLIQUE[\\\\s\\\\S]*?:([\\\\s\\\\S]*?)EXPLICATION TH\\xC9OLOGIQUE[\\\\s\\\\S]*?:([\\\\s\\\\S]*?)(?=VERSET|$)\"),'i');const match=currentContent.match(versetRegex);if(match){const versetText=match[1].trim();const currentExplication=match[2].trim();await enrichirExplicationGemini(versetNumber,currentExplication,versetText);}};// Fonction pour nettoyer les marqueurs Markdown\nconst cleanMarkdownFormatting=text=>{if(!text)return'';return text// Supprimer les ** pour le gras\n.replace(/\\*\\*/g,'')// Supprimer les * pour l'italique\n.replace(/(?<!\\*)\\*(?!\\*)/g,'')// Nettoyer les espaces multiples\n.replace(/\\s+/g,' ')// Nettoyer les lignes vides multiples\n.replace(/\\n\\s*\\n\\s*\\n/g,'\\n\\n').trim();};// Nouvelle approche : Analyser le contenu et créer des composants React avec boutons intégrés\nconst parseContentWithGeminiButtons=content=>{if(!content)return[];const sections=[];const versetPattern=/(\\*\\*VERSET\\s+(\\d+)\\*\\*[\\s\\S]*?)(?=\\*\\*VERSET\\s+\\d+|$)/gi;let match;while((match=versetPattern.exec(content))!==null){const versetNumber=parseInt(match[2]);const versetContent=match[1].trim();// Séparer le contenu en parties\nconst parts=versetContent.split(/(\\*\\*TEXTE BIBLIQUE\\s*:\\*\\*|\\*\\*EXPLICATION THÉOLOGIQUE\\s*:\\*\\*)/i);let versetTitle='';let texteContent='';let explicationContent='';for(let i=0;i<parts.length;i++){const part=parts[i].trim();if(part.includes('**VERSET')){versetTitle=cleanMarkdownFormatting(part);}else if(part.match(/TEXTE BIBLIQUE/i)){var _parts;texteContent=cleanMarkdownFormatting(((_parts=parts[i+1])===null||_parts===void 0?void 0:_parts.trim())||'');i++;// Skip next part as we've consumed it\n}else if(part.match(/\\*\\*EXPLICATION THÉOLOGIQUE/i)){var _parts2;explicationContent=cleanMarkdownFormatting(((_parts2=parts[i+1])===null||_parts2===void 0?void 0:_parts2.trim())||'');i++;// Skip next part as we've consumed it\n}}sections.push({number:versetNumber,title:versetTitle,texte:texteContent,explication:explicationContent});}return sections;};// Fonction pour extraire les numéros de versets du contenu\nconst extractVersetNumbers=content=>{if(!content)return[];const versetPattern=/\\*\\*VERSET\\s+(\\d+)\\*\\*/gi;const matches=[];let match;while((match=versetPattern.exec(content))!==null){matches.push(parseInt(match[1]));}return matches;};// Fonction pour formater intelligemment l'explication théologique\nconst formatExplicationTheologique=text=>{if(!text)return'';// Décoder les entités HTML pour éviter l'affichage de code CSS brut\nlet formattedText=text.replace(/&lt;/g,'<').replace(/&gt;/g,'>').replace(/&quot;/g,'\"').replace(/&#x27;/g,\"'\").replace(/&amp;/g,'&');// Nettoyer COMPLÈTEMENT tous les styles CSS qui peuvent apparaître en texte brut\nformattedText=formattedText.replace(/style=\"[^\"]*\"/g,'')// Supprimer tous les attributs style\n.replace(/background:\\s*linear-gradient\\([^)]*\\);?/g,'')// Supprimer les CSS linear-gradient\n.replace(/color:\\s*white\\s*!important;?/g,'')// Supprimer color: white\n.replace(/font-weight:\\s*\\d+\\s*!important;?/g,'')// Supprimer font-weight\n.replace(/padding:\\s*[^;]*;?/g,'')// Supprimer padding\n.replace(/border-radius:\\s*[^;]*;?/g,'')// Supprimer border-radius  \n.replace(/text-shadow:\\s*[^;]*;?/g,'')// Supprimer text-shadow\n.replace(/[^>]*\">/g,'>')// Nettoyer les remnants de balises\n.replace(/>\\s*\"/g,'>')// Nettoyer les guillemets orphelins\n.replace(/\"\\s*</g,'<');// Nettoyer les guillemets orphelins\n// 1. Rendre les références bibliques cliquables (simplifié, sans style inline)\nconst referencePattern=/(Genèse|Exode|Lévitique|Nombres|Deutéronome|Josué|Juges|Ruth|1 Samuel|2 Samuel|1 Rois|2 Rois|1 Chroniques|2 Chroniques|Esdras|Néhémie|Esther|Job|Psaumes|Proverbes|Ecclésiaste|Cantique|Ésaïe|Jérémie|Lamentations|Ézéchiel|Daniel|Osée|Joël|Amos|Abdias|Jonas|Michée|Nahum|Habacuc|Sophonie|Aggée|Zacharie|Malachie|Matthieu|Marc|Luc|Jean|Actes|Romains|1 Corinthiens|2 Corinthiens|Galates|Éphésiens|Philippiens|Colossiens|1 Thessaloniciens|2 Thessaloniciens|1 Timothée|2 Timothée|Tite|Philémon|Hébreux|Jacques|1 Pierre|2 Pierre|1 Jean|2 Jean|3 Jean|Jude|Apocalypse)\\s+(\\d+):(\\d+(?:-\\d+)?)/g;formattedText=formattedText.replace(referencePattern,(match,livre,chapitre,verset)=>{const searchQuery=encodeURIComponent(\"\".concat(livre,\" \").concat(chapitre,\":\").concat(verset));return\"<a href=\\\"https://www.bible.com/search/bible?q=\".concat(searchQuery,\"\\\" target=\\\"_blank\\\" class=\\\"bible-reference\\\" title=\\\"Cliquer pour lire ce verset sur YouVersion\\\">\").concat(match,\"</a>\");});// 2. Mettre en gras les concepts théologiques importants (utiliser des classes CSS)\nconst conceptsTheologiques=['bénédiction divine','volonté de Dieu','fils de Dieu','filles d\\'hommes','croissance démographique','lignée de Seth','lignée de Caïn','application pratique','sur le plan spirituel','contexte historique','signification théologique','enseignement biblique','principe biblique','perspective chrétienne','vérité spirituelle','message divin','révélation divine','sagesse divine','justice divine','miséricorde divine','alliance divine','promesse divine','amour de Dieu','grâce divine','royaume de Dieu','peuple élu','salut','rédemption','sanctification','justification','régénération','conversion','repentance','foi','espérance','charité','humilité','obéissance','soumission','témoignage chrétien','vie chrétienne','disciple','discipleship'];conceptsTheologiques.forEach(concept=>{const regex=new RegExp(\"(\".concat(concept,\")\"),'gi');formattedText=formattedText.replace(regex,'<strong class=\"theological-concept\">$1</strong>');});// 3. Mettre en gras les expressions importantes entre guillemets\nformattedText=formattedText.replace(/\"([^\"]+)\"/g,'<strong class=\"quoted-text\">\"$1\"</strong>');// 4. Mettre en évidence les phrases de conclusion/application\nconst conclusionPatterns=[/(L'application pratique [^.]+\\.)/gi,/(En conclusion[^.]+\\.)/gi,/(Ainsi[^.]+\\.)/gi,/(Par conséquent[^.]+\\.)/gi,/(Il en résulte [^.]+\\.)/gi,/(Cela nous enseigne [^.]+\\.)/gi,/(Nous pouvons donc [^.]+\\.)/gi,/(Cette vérité nous [^.]+\\.)/gi];conclusionPatterns.forEach(pattern=>{formattedText=formattedText.replace(pattern,'<span style=\"background: #10b981; color: white !important; font-weight: 700 !important; font-style: italic; padding: 3px 8px; border-radius: 6px; display: inline-block; margin: 2px; text-shadow: 0 1px 2px rgba(0,0,0,0.3);\">$1</span>');});// 5. Mettre en gras les mots-clés doctrinaux\nconst motsClesDoctrinaux=['fécondité','procréation','sexualité','mariage','famille','responsabilité','intendance','dégénérescence','corruption','péché','chute','rachat','restauration','nouvelle création','esprit','âme','corps','trinité','incarnation','résurrection'];motsClesDoctrinaux.forEach(mot=>{const regex=new RegExp(\"\\\\b(\".concat(mot,\")\\\\b\"),'gi');formattedText=formattedText.replace(regex,'<span style=\"background: #ef4444; color: white !important; padding: 2px 5px; border-radius: 4px; font-weight: 700 !important; text-shadow: 0 1px 1px rgba(0,0,0,0.4); border: 1px solid rgba(255,255,255,0.2);\">$1</span>');});return formattedText;};return/*#__PURE__*/_jsxs(\"div\",{style:{minHeight:'100vh',background:'linear-gradient(135deg, rgba(248, 250, 252, 0.98) 0%, rgba(241, 245, 249, 0.95) 50%, rgba(248, 250, 252, 0.98) 100%)',fontFamily:'Inter, -apple-system, BlinkMacSystemFont, sans-serif'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{background:'linear-gradient(135deg, rgba(139, 92, 246, 0.95) 0%, rgba(124, 58, 237, 0.98) 100%)',color:'white',padding:'30px 20px',boxShadow:'0 8px 32px rgba(139, 92, 246, 0.25)',position:'sticky',top:0,zIndex:100,overflow:'hidden'},children:[/*#__PURE__*/_jsx(\"div\",{style:{position:'absolute',top:0,left:0,right:0,bottom:0,background:'linear-gradient(45deg, rgba(255, 255, 255, 0.1) 0%, transparent 50%, rgba(255, 255, 255, 0.05) 100%)',pointerEvents:'none'}}),/*#__PURE__*/_jsxs(\"div\",{style:{maxWidth:'900px',margin:'0 auto',position:'relative',zIndex:10},children:[/*#__PURE__*/_jsx(\"button\",{onClick:onGoBack,style:{background:'rgba(255, 255, 255, 0.2)',border:'1px solid rgba(255, 255, 255, 0.3)',color:'white',padding:'10px 20px',borderRadius:'12px',cursor:'pointer',fontSize:'14px',fontWeight:'600',marginBottom:'20px',backdropFilter:'blur(10px)',transition:'all 0.3s ease'},onMouseOver:e=>{e.target.style.background='rgba(255, 255, 255, 0.3)';e.target.style.transform='translateY(-2px)';},onMouseOut:e=>{e.target.style.background='rgba(255, 255, 255, 0.2)';e.target.style.transform='translateY(0)';},children:\"\\u2190 Retour \\xE0 l'\\xC9tude\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',justifyContent:'center',gap:'20px',flexWrap:'wrap',marginBottom:'8px'},children:[/*#__PURE__*/_jsx(\"h1\",{style:{fontSize:'clamp(1.8rem, 4vw, 2.5rem)',fontWeight:'800',margin:0,textShadow:'0 2px 8px rgba(0, 0, 0, 0.1)',textAlign:'center'},children:\"\\uD83D\\uDCD6 \\xC9tude Verset par Verset\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'12px',flexWrap:'wrap'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>window.open('https://gemini.google.com/','_blank'),style:{background:'linear-gradient(135deg, #8b5cf6, #7c3aed)',border:'none',borderRadius:'10px',color:'white',padding:'8px 14px',fontSize:'12px',fontWeight:'600',cursor:'pointer',transition:'all 0.3s ease',boxShadow:'0 3px 10px rgba(139, 92, 246, 0.3)',fontFamily:'Montserrat, sans-serif'},onMouseOver:e=>{e.target.style.transform='translateY(-1px)';e.target.style.boxShadow='0 4px 15px rgba(139, 92, 246, 0.4)';},onMouseOut:e=>{e.target.style.transform='translateY(0px)';e.target.style.boxShadow='0 3px 10px rgba(139, 92, 246, 0.3)';},children:\"\\uD83E\\uDD16 Gemini\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{// Navigation vers la page de notes\nif(onGoBack){// Retourner à la page principale puis naviguer vers les notes\nonGoBack();setTimeout(()=>{// Simuler le clic sur prise de note de la page principale\nwindow.dispatchEvent(new CustomEvent('navigate-to-notes'));},100);}},style:{background:'linear-gradient(135deg, #10b981, #059669)',border:'none',borderRadius:'10px',color:'white',padding:'8px 14px',fontSize:'12px',fontWeight:'600',cursor:'pointer',transition:'all 0.3s ease',boxShadow:'0 3px 10px rgba(16, 185, 129, 0.3)',fontFamily:'Montserrat, sans-serif',textAlign:'center'},onMouseOver:e=>{e.target.style.transform='translateY(-1px)';e.target.style.boxShadow='0 4px 15px rgba(16, 185, 129, 0.4)';},onMouseOut:e=>{e.target.style.transform='translateY(0px)';e.target.style.boxShadow='0 3px 10px rgba(16, 185, 129, 0.3)';},children:\"\\uD83D\\uDCDD Prise de Note\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>window.open('https://chatgpt.com/','_blank'),style:{background:'linear-gradient(135deg, #f59e0b, #d97706)',border:'none',borderRadius:'10px',color:'white',padding:'8px 14px',fontSize:'12px',fontWeight:'600',cursor:'pointer',transition:'all 0.3s ease',boxShadow:'0 3px 10px rgba(245, 158, 11, 0.3)',fontFamily:'Montserrat, sans-serif',textAlign:'center'},onMouseOver:e=>{e.target.style.transform='translateY(-1px)';e.target.style.boxShadow='0 4px 15px rgba(245, 158, 11, 0.4)';},onMouseOut:e=>{e.target.style.transform='translateY(0px)';e.target.style.boxShadow='0 3px 10px rgba(245, 158, 11, 0.3)';},children:\"\\uD83D\\uDCAC ChatGPT\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>window.open('https://www.bible.com/','_blank'),style:{background:'linear-gradient(135deg, #3b82f6, #2563eb)',border:'none',borderRadius:'10px',color:'white',padding:'8px 14px',fontSize:'12px',fontWeight:'600',cursor:'pointer',transition:'all 0.3s ease',boxShadow:'0 3px 10px rgba(59, 130, 246, 0.3)',fontFamily:'Montserrat, sans-serif',textAlign:'center'},onMouseOver:e=>{e.target.style.transform='translateY(-1px)';e.target.style.boxShadow='0 4px 15px rgba(59, 130, 246, 0.4)';},onMouseOut:e=>{e.target.style.transform='translateY(0px)';e.target.style.boxShadow='0 3px 10px rgba(59, 130, 246, 0.3)';},children:\"\\uD83D\\uDCD6 Lire la Bible\"}),/*#__PURE__*/_jsx(ApiControlPanel,{backendUrl:process.env.REACT_APP_BACKEND_URL||\"http://localhost:8001\"})]})]}),bookInfo&&/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'clamp(1rem, 3vw, 1.2rem)',textAlign:'center',opacity:0.9,fontWeight:'500'},children:[bookInfo,\" \\u2022 Batch \",currentBatch,\" (versets \",(currentBatch-1)*5+1,\"-\",currentBatch*5,\")\"]})]})]}),/*#__PURE__*/_jsx(\"div\",{style:{maxWidth:'900px',margin:'0 auto',padding:'20px',// Optimisation mobile : padding plus petit sur mobile\n'@media (maxWidth: 768px)':{padding:'15px'}},children:getCurrentBatchContent()?/*#__PURE__*/_jsxs(\"div\",{style:{background:'white',borderRadius:'16px',padding:'clamp(20px, 5vw, 40px)',boxShadow:'0 8px 32px rgba(0, 0, 0, 0.08)',border:'1px solid rgba(226, 232, 240, 0.8)',lineHeight:'1.7',fontSize:'clamp(15px, 4vw, 16px)',marginBottom:'20px'},children:[parseContentWithGeminiButtons(getCurrentBatchContent()).map((section,index)=>/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'40px'},children:[/*#__PURE__*/_jsx(\"div\",{className:\"verset-header\",children:section.title}),section.texte&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"texte-biblique-label\",children:\"TEXTE BIBLIQUE :\"}),/*#__PURE__*/_jsx(\"div\",{style:{marginBottom:'20px',padding:'10px 0',color:'#374151'},children:section.texte})]}),section.explication&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',justifyContent:'space-between',gap:'15px',marginBottom:'16px',flexWrap:'wrap'},children:[/*#__PURE__*/_jsx(\"div\",{className:\"explication-label\",style:{flex:'1',minWidth:'200px'},children:\"EXPLICATION TH\\xC9OLOGIQUE :\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleEnrichirVerset(section.number),disabled:enrichingVersets[\"\".concat(currentBatch,\"-\").concat(section.number)],style:{background:enrichingVersets[\"\".concat(currentBatch,\"-\").concat(section.number)]?'linear-gradient(135deg, #94a3b8 0%, #64748b 100%)':'linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%)',color:'white',border:'none',padding:'clamp(8px, 2vw, 12px) clamp(12px, 3vw, 18px)',borderRadius:'8px',fontSize:'clamp(12px, 3vw, 14px)',fontWeight:'600',cursor:enrichingVersets[\"\".concat(currentBatch,\"-\").concat(section.number)]?'not-allowed':'pointer',transition:'all 0.3s ease',boxShadow:'0 3px 12px rgba(139, 92, 246, 0.25)',whiteSpace:'nowrap',flexShrink:0,opacity:enrichingVersets[\"\".concat(currentBatch,\"-\").concat(section.number)]?0.7:1},onMouseOver:e=>{if(!enrichingVersets[\"\".concat(currentBatch,\"-\").concat(section.number)]){e.target.style.transform='translateY(-1px)';e.target.style.boxShadow='0 4px 16px rgba(139, 92, 246, 0.35)';}},onMouseOut:e=>{if(!enrichingVersets[\"\".concat(currentBatch,\"-\").concat(section.number)]){e.target.style.transform='translateY(0)';e.target.style.boxShadow='0 3px 12px rgba(139, 92, 246, 0.25)';}},children:enrichingVersets[\"\".concat(currentBatch,\"-\").concat(section.number)]?'⏳ Gemini...':'🤖 Gemini gratuit'})]}),/*#__PURE__*/_jsx(\"div\",{style:{color:'#374151',lineHeight:'1.7',marginBottom:'10px',fontSize:'15px',textAlign:'justify'},dangerouslySetInnerHTML:{__html:formatExplicationTheologique(section.explication)}}),enrichingVersets[\"\".concat(currentBatch,\"-\").concat(section.number)]&&/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'8px',marginTop:'12px',color:'#6b7280',fontSize:'clamp(12px, 3vw, 14px)',justifyContent:'center',padding:'10px',background:'rgba(139, 92, 246, 0.05)',borderRadius:'8px'},children:[/*#__PURE__*/_jsx(\"div\",{style:{width:'16px',height:'16px',border:'2px solid #e5e7eb',borderTop:'2px solid #8b5cf6',borderRadius:'50%',animation:'spin 1s linear infinite'}}),\"Enrichissement en cours avec Gemini...\"]})]})]},section.number)),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'15px',marginTop:'40px',justifyContent:'center',flexWrap:'wrap'},children:[currentBatch>1&&/*#__PURE__*/_jsx(\"button\",{onClick:goToPreviousBatch,style:{background:'linear-gradient(135deg, #6b7280 0%, #4b5563 100%)',color:'white',border:'none',padding:'clamp(12px, 3vw, 16px) clamp(20px, 5vw, 32px)',borderRadius:'12px',fontSize:'clamp(14px, 3.5vw, 16px)',fontWeight:'600',cursor:'pointer',transition:'all 0.3s ease',boxShadow:'0 4px 16px rgba(107, 114, 128, 0.25)',minWidth:'140px'},onMouseOver:e=>{e.target.style.transform='translateY(-2px)';e.target.style.boxShadow='0 6px 24px rgba(107, 114, 128, 0.35)';},onMouseOut:e=>{e.target.style.transform='translateY(0)';e.target.style.boxShadow='0 4px 16px rgba(107, 114, 128, 0.25)';},children:\"\\u25C0 Pr\\xE9c\\xE9dent\"}),/*#__PURE__*/_jsx(\"button\",{onClick:loadNextBatch,disabled:isLoadingMore,style:{background:isLoadingMore?'linear-gradient(135deg, #94a3b8 0%, #64748b 100%)':'linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%)',color:'white',border:'none',padding:'clamp(12px, 3vw, 16px) clamp(20px, 5vw, 32px)',borderRadius:'12px',fontSize:'clamp(14px, 3.5vw, 16px)',fontWeight:'600',cursor:isLoadingMore?'not-allowed':'pointer',transition:'all 0.3s ease',boxShadow:'0 4px 16px rgba(139, 92, 246, 0.25)',minWidth:'140px',opacity:isLoadingMore?0.7:1},onMouseOver:e=>{if(!isLoadingMore){e.target.style.transform='translateY(-2px)';e.target.style.boxShadow='0 6px 24px rgba(139, 92, 246, 0.35)';}},onMouseOut:e=>{if(!isLoadingMore){e.target.style.transform='translateY(0)';e.target.style.boxShadow='0 4px 16px rgba(139, 92, 246, 0.25)';}},children:isLoadingMore?'⏳ Chargement...':'Suivant ▶'})]}),/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:'center',marginTop:'20px',fontSize:'clamp(12px, 3vw, 14px)',color:'#6b7280'},children:[\"\\uD83D\\uDCD6 Batch \",currentBatch,\" \\u2022 Versets \",(currentBatch-1)*5+1,\" \\xE0 \",currentBatch*5]}),/*#__PURE__*/_jsx(\"style\",{children:\"\\n                .verset-header {\\n                  background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%);\\n                  color: white;\\n                  font-size: clamp(1.2rem, 4vw, 1.4rem);\\n                  font-weight: 800;\\n                  padding: clamp(12px, 3vw, 16px) clamp(16px, 4vw, 24px);\\n                  border-radius: 12px;\\n                  margin: clamp(24px, 6vw, 32px) 0 clamp(16px, 4vw, 20px) 0;\\n                  text-align: center;\\n                  box-shadow: 0 4px 16px rgba(139, 92, 246, 0.25);\\n                  text-transform: uppercase;\\n                  letter-spacing: 1px;\\n                }\\n                \\n                .texte-biblique-label {\\n                  background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);\\n                  color: white;\\n                  font-size: clamp(1rem, 3.5vw, 1.1rem);\\n                  font-weight: 700;\\n                  padding: clamp(10px, 3vw, 12px) clamp(16px, 4vw, 20px);\\n                  border-radius: 10px;\\n                  margin: clamp(20px, 5vw, 24px) 0 clamp(12px, 3vw, 16px) 0;\\n                  box-shadow: 0 4px 12px rgba(59, 130, 246, 0.25);\\n                  text-transform: uppercase;\\n                  letter-spacing: 0.5px;\\n                }\\n                \\n                .explication-label {\\n                  background: linear-gradient(135deg, #f97316 0%, #ea580c 100%);\\n                  color: white;\\n                  font-size: clamp(1rem, 3.5vw, 1.1rem);\\n                  font-weight: 700;\\n                  padding: clamp(10px, 3vw, 12px) clamp(16px, 4vw, 20px);\\n                  border-radius: 10px;\\n                  margin: clamp(20px, 5vw, 24px) 0 clamp(12px, 3vw, 16px) 0;\\n                  \\n                /* Styles pour les \\xE9l\\xE9ments format\\xE9s */\\n                .theological-concept {\\n                  background: linear-gradient(135deg, #8b5cf6, #7c3aed);\\n                  color: white !important;\\n                  font-weight: 800 !important;\\n                  padding: 2px 6px;\\n                  border-radius: 4px;\\n                  text-shadow: 0 1px 2px rgba(0,0,0,0.5);\\n                }\\n                \\n                .quoted-text {\\n                  background: #f59e0b;\\n                  color: white !important;\\n                  font-weight: 700 !important;\\n                  font-style: italic;\\n                  padding: 1px 4px;\\n                  border-radius: 3px;\\n                  text-shadow: 0 1px 1px rgba(0,0,0,0.3);\\n                }\\n                \\n                .bible-reference {\\n                  color: #8b5cf6 !important;\\n                  text-decoration: underline;\\n                  font-weight: 600;\\n                  cursor: pointer;\\n                }\\n                \\n                .bible-reference:hover {\\n                  color: #7c3aed !important;\\n                }\\n                  box-shadow: 0 4px 12px rgba(249, 115, 22, 0.25);\\n                  text-transform: uppercase;\\n                  letter-spacing: 0.5px;\\n                }\\n                \\n                .verset-content p {\\n                  margin-bottom: clamp(16px, 4vw, 18px);\\n                  line-height: 1.7;\\n                  font-size: clamp(15px, 4vw, 16px);\\n                }\\n                \\n                .verset-content br {\\n                  line-height: 1.7;\\n                }\\n                \\n                /* Animation spin pour les loadings */\\n                @keyframes spin {\\n                  0% { transform: rotate(0deg); }\\n                  100% { transform: rotate(360deg); }\\n                }\\n                \\n                /* Responsive mobile - lecture optimis\\xE9e */\\n                @media (max-width: 768px) {\\n                  .verset-header {\\n                    margin: 20px 0 16px 0;\\n                    border-radius: 8px;\\n                  }\\n                  \\n                  .texte-biblique-label,\\n                  .explication-label {\\n                    margin: 16px 0 12px 0;\\n                    border-radius: 8px;\\n                  }\\n                  \\n                  .verset-content p {\\n                    margin-bottom: 14px;\\n                    text-align: left;\\n                  }\\n                }\\n                \\n                /* Styles pour tr\\xE8s petits \\xE9crans */\\n                @media (max-width: 480px) {\\n                  .verset-header {\\n                    font-size: 1.1rem;\\n                    padding: 10px 14px;\\n                  }\\n                  \\n                  .texte-biblique-label,\\n                  .explication-label {\\n                    font-size: 0.95rem;\\n                    padding: 8px 14px;\\n                  }\\n                }\\n              \"})]}):/*#__PURE__*/_jsxs(\"div\",{style:{background:'white',borderRadius:'20px',padding:'clamp(40px, 8vw, 60px)',textAlign:'center',boxShadow:'0 12px 40px rgba(0, 0, 0, 0.08)'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'clamp(3rem, 8vw, 4rem)',marginBottom:'20px'},children:\"\\uD83D\\uDCD6\"}),/*#__PURE__*/_jsx(\"h2\",{style:{fontSize:'clamp(1.5rem, 5vw, 2rem)',color:'#1f2937',marginBottom:'16px',fontWeight:'700'},children:\"Pr\\xEAt pour l'\\xC9tude Verset par Verset\"}),/*#__PURE__*/_jsxs(\"p\",{style:{color:'#6b7280',fontSize:'clamp(1rem, 3vw, 1.1rem)',maxWidth:'500px',margin:'0 auto',lineHeight:'1.6'},children:[\"S\\xE9lectionnez un passage biblique depuis la page principale pour commencer une \\xE9tude approfondie verset par verset avec explications th\\xE9ologiques.\",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"strong\",{children:\"Nouveau :\"}),\" 5 versets par batch avec navigation fluide !\"]})]})})]});};export default VersetParVersetPage;","map":{"version":3,"names":["React","useState","useEffect","ApiControlPanel","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ApiStatusButton_OLD_REMOVED","apiStatus","setApiStatus","isOpen","setIsOpen","showTooltip","setShowTooltip","getBackendUrl","process","env","REACT_APP_BACKEND_URL","hostname","window","location","BACKEND_URL","fetchApiStatus","response","fetch","concat","ok","healthData","json","adaptedStatus","timestamp","Date","toISOString","apis","gemini_1","color","name","status","gemini_2","gemini_3","gemini_4","bible_api","bible_api_configured","active_api","current_key","error","console","getLedColor","api","interval","setInterval","clearInterval","style","position","display","children","onClick","background","border","borderRadius","padding","fontSize","fontWeight","cursor","transition","boxShadow","fontFamily","alignItems","gap","overflow","onMouseOver","e","target","transform","onMouseOut","width","height","backgroundColor","Object","values","every","animation","entries","map","_ref","key","title","className","top","right","marginTop","backdropFilter","minWidth","zIndex","justifyContent","marginBottom","borderBottom","paddingBottom","margin","_ref2","API_BASE","replace","VersetParVersetPage","_ref3","onGoBack","content","bookInfo","currentBatch","setCurrentBatch","isLoadingMore","setIsLoadingMore","allVersetsBatches","setAllVersetsBatches","totalVersetsExpected","setTotalVersetsExpected","enrichingVersets","setEnrichingVersets","prev","_objectSpread","enrichirExplicationGemini","versetNumber","currentExplication","versetText","enrichKey","log","apiUrl","prompt","method","headers","body","JSON","stringify","passage","version","tokens","use_gemini","enriched","custom_prompt","Error","data","currentBatchContent","versetPattern","RegExp","enrichedExplication","trim","enrichedContent","loadNextBatch","nextBatch","startVerse","endVerse","bookChapter","split","requestPassage","goToPreviousBatch","getCurrentBatchContent","handleEnrichirVerset","currentContent","versetRegex","match","cleanMarkdownFormatting","text","parseContentWithGeminiButtons","sections","exec","parseInt","versetContent","parts","versetTitle","texteContent","explicationContent","i","length","part","includes","_parts","_parts2","push","number","texte","explication","extractVersetNumbers","matches","formatExplicationTheologique","formattedText","referencePattern","livre","chapitre","verset","searchQuery","encodeURIComponent","conceptsTheologiques","forEach","concept","regex","conclusionPatterns","pattern","motsClesDoctrinaux","mot","minHeight","left","bottom","pointerEvents","maxWidth","flexWrap","textShadow","textAlign","open","setTimeout","dispatchEvent","CustomEvent","backendUrl","opacity","lineHeight","section","index","flex","disabled","whiteSpace","flexShrink","dangerouslySetInnerHTML","__html","borderTop"],"sources":["/app/src/VersetParVersetPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport ApiControlPanel from './ApiControlPanel';\n\n// ANCIEN COMPOSANT SUPPRIMÉ - Utilise ApiControlPanel centralisé\nconst ApiStatusButton_OLD_REMOVED = () => {\n  const [apiStatus, setApiStatus] = useState(null);\n  const [isOpen, setIsOpen] = useState(false);\n  const [showTooltip, setShowTooltip] = useState(false);\n\n  // Configuration du backend\n  const getBackendUrl = () => {\n    if (process.env.REACT_APP_BACKEND_URL) {\n      return process.env.REACT_APP_BACKEND_URL;\n    }\n    const hostname = window.location.hostname;\n    if (hostname === \"localhost\" || hostname === \"127.0.0.1\") return \"http://localhost:8001\";\n    return \"https://rubrique-study.preview.emergentagent.com\";\n  };\n\n  const BACKEND_URL = getBackendUrl();\n\n  // Fonction pour récupérer le statut des API\n  const fetchApiStatus = async () => {\n    try {\n      const response = await fetch(`${BACKEND_URL}/api/health`);\n      if (response.ok) {\n        const healthData = await response.json();\n        \n        const adaptedStatus = {\n          timestamp: new Date().toISOString(),\n          apis: {\n            gemini_1: { color: 'green', name: 'Gemini Key 1', status: 'active' },\n            gemini_2: { color: 'green', name: 'Gemini Key 2', status: 'active' },\n            gemini_3: { color: 'green', name: 'Gemini Key 3', status: 'active' },\n            gemini_4: { color: 'green', name: 'Gemini Key 4', status: 'active' },\n            bible_api: { color: healthData.bible_api_configured ? 'green' : 'red', name: 'Bible API', status: healthData.bible_api_configured ? 'active' : 'inactive' }\n          },\n          active_api: healthData.current_key || 'gemini_1'\n        };\n        \n        setApiStatus(adaptedStatus);\n      }\n    } catch (error) {\n      console.error('[API STATUS] Erreur:', error);\n    }\n  };\n\n  const getLedColor = (api) => {\n    return api.color === 'green' ? '#00ff00' : '#ff0000';\n  };\n\n  useEffect(() => {\n    fetchApiStatus();\n    const interval = setInterval(fetchApiStatus, 10000);\n    return () => clearInterval(interval);\n  }, []);\n\n  return (\n    <div style={{ position: 'relative', display: 'inline-block' }}>\n      {/* Styles CSS pour les animations LED */}\n      <style>\n        {`\n          @keyframes pulse-green {\n            0%, 100% { \n              box-shadow: 0 0 8px #00ff00, 0 0 16px #00ff00; \n              opacity: 1; \n            }\n            50% { \n              box-shadow: 0 0 12px #00ff00, 0 0 24px #00ff00; \n              opacity: 0.8; \n            }\n          }\n          @keyframes pulse-red {\n            0%, 100% { \n              box-shadow: 0 0 8px #ff0000, 0 0 16px #ff0000; \n              opacity: 1; \n            }\n            50% { \n              box-shadow: 0 0 12px #ff0000, 0 0 24px #ff0000; \n              opacity: 0.4; \n            }\n          }\n          .api-tooltip {\n            position: absolute;\n            top: -40px;\n            left: 50%;\n            transform: translateX(-50%);\n            background: rgba(0,0,0,0.9);\n            color: white;\n            padding: 6px 12px;\n            borderRadius: 8px;\n            fontSize: 10px;\n            whiteSpace: nowrap;\n            zIndex: 1001;\n            opacity: 0;\n            transition: opacity 0.3s ease;\n          }\n          .api-tooltip.visible {\n            opacity: 1;\n          }\n        `}\n      </style>\n\n      {/* Bouton API avec LEDs */}\n      <button\n        onClick={() => setIsOpen(!isOpen)}\n        style={{\n          background: 'linear-gradient(135deg, #3742fa, #2f3542)',\n          border: 'none',\n          borderRadius: '10px',\n          color: 'white',\n          padding: '8px 14px',\n          fontSize: '12px',\n          fontWeight: '600',\n          cursor: 'pointer',\n          transition: 'all 0.3s ease',\n          boxShadow: '0 3px 10px rgba(55, 66, 250, 0.3)',\n          fontFamily: 'Montserrat, sans-serif',\n          display: 'flex',\n          alignItems: 'center',\n          gap: '8px',\n          position: 'relative',\n          overflow: 'hidden'\n        }}\n        onMouseOver={(e) => {\n          e.target.style.transform = 'translateY(-1px)';\n          e.target.style.boxShadow = '0 4px 15px rgba(55, 66, 250, 0.4)';\n          setShowTooltip(true);\n        }}\n        onMouseOut={(e) => {\n          e.target.style.transform = 'translateY(0px)';\n          e.target.style.boxShadow = '0 3px 10px rgba(55, 66, 250, 0.3)';\n          setShowTooltip(false);\n        }}\n      >\n        <span>⚡ API</span>\n        \n        {/* LEDs physiques individuelles */}\n        {apiStatus && (\n          <div style={{ \n            display: 'flex', \n            alignItems: 'center',\n            gap: '4px',\n            background: 'rgba(255,255,255,0.15)',\n            padding: '2px 6px',\n            borderRadius: '6px'\n          }}>\n            {/* LED de statut global */}\n            <div style={{\n              width: '6px',\n              height: '6px',\n              borderRadius: '50%',\n              backgroundColor: Object.values(apiStatus.apis).every(api => api.color === 'green') ? '#00ff00' : '#ff0000',\n              animation: Object.values(apiStatus.apis).every(api => api.color === 'green') ? 'pulse-green 2s infinite' : 'pulse-red 1s infinite'\n            }} />\n            \n            {/* LEDs individuelles pour chaque API */}\n            <div style={{ display: 'flex', gap: '2px' }}>\n              {Object.entries(apiStatus.apis).map(([key, api]) => (\n                <div \n                  key={key}\n                  style={{\n                    width: '4px',\n                    height: '4px',\n                    borderRadius: '50%',\n                    backgroundColor: getLedColor(api),\n                    animation: api.color === 'green' ? 'pulse-green 2s infinite' : 'pulse-red 1s infinite'\n                  }}\n                  title={`${api.name}: ${api.status}`}\n                />\n              ))}\n            </div>\n          </div>\n        )}\n\n        {/* Tooltip */}\n        {showTooltip && apiStatus && (\n          <div className={`api-tooltip ${showTooltip ? 'visible' : ''}`}>\n            {Object.values(apiStatus.apis).every(api => api.color === 'green') \n              ? '🟢 Toutes les API sont opérationnelles' \n              : '🔴 Certaines API ont des problèmes'\n            }\n          </div>\n        )}\n      </button>\n\n      {/* Panneau de contrôle détaillé */}\n      {isOpen && (\n        <div style={{\n          position: 'absolute',\n          top: '100%',\n          right: '0',\n          marginTop: '10px',\n          background: 'rgba(255, 255, 255, 0.95)',\n          backdropFilter: 'blur(10px)',\n          border: '1px solid rgba(255, 255, 255, 0.2)',\n          borderRadius: '12px',\n          padding: '16px',\n          minWidth: '280px',\n          boxShadow: '0 10px 30px rgba(0,0,0,0.2)',\n          zIndex: 1000\n        }}>\n          <div style={{\n            display: 'flex',\n            justifyContent: 'space-between',\n            alignItems: 'center',\n            marginBottom: '12px',\n            borderBottom: '1px solid rgba(0,0,0,0.1)',\n            paddingBottom: '8px'\n          }}>\n            <h4 style={{\n              margin: 0,\n              color: '#333',\n              fontSize: '14px',\n              fontWeight: 'bold'\n            }}>\n              🔧 Statut des API\n            </h4>\n            <button\n              onClick={() => setIsOpen(false)}\n              style={{\n                background: 'none',\n                border: 'none',\n                fontSize: '16px',\n                cursor: 'pointer',\n                color: '#666'\n              }}\n            >\n              ×\n            </button>\n          </div>\n\n          {/* Liste des API avec LEDs */}\n          {apiStatus && (\n            <div style={{ fontSize: '12px' }}>\n              {Object.entries(apiStatus.apis).map(([key, api]) => (\n                <div \n                  key={key}\n                  style={{ \n                    display: 'flex',\n                    alignItems: 'center',\n                    justifyContent: 'space-between',\n                    padding: '6px 0',\n                    borderBottom: '1px solid rgba(0,0,0,0.05)'\n                  }}\n                >\n                  <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>\n                    <div style={{\n                      width: '8px',\n                      height: '8px',\n                      borderRadius: '50%',\n                      backgroundColor: getLedColor(api),\n                      animation: api.color === 'green' ? 'pulse-green 2s infinite' : 'pulse-red 1s infinite'\n                    }} />\n                    <span style={{ color: '#333', fontWeight: '500' }}>\n                      {api.name}\n                    </span>\n                  </div>\n                  <span style={{ \n                    color: api.color === 'green' ? '#059669' : '#dc2626',\n                    fontSize: '11px',\n                    fontWeight: '600'\n                  }}>\n                    {api.color === 'green' ? '✅ OK' : '❌ ERR'}\n                  </span>\n                </div>\n              ))}\n            </div>\n          )}\n\n          {/* Rafraîchir */}\n          <button\n            onClick={fetchApiStatus}\n            style={{\n              marginTop: '12px',\n              width: '100%',\n              padding: '8px',\n              background: 'linear-gradient(135deg, #3742fa, #2f3542)',\n              color: 'white',\n              border: 'none',\n              borderRadius: '8px',\n              fontSize: '12px',\n              fontWeight: '600',\n              cursor: 'pointer'\n            }}\n          >\n            🔄 Rafraîchir\n          </button>\n        </div>\n      )}\n    </div>\n  );\n};\n\n// Configuration du backend - utilise la variable d'environnement\nconst getBackendUrl = () => {\n  if (process.env.REACT_APP_BACKEND_URL) {\n    return process.env.REACT_APP_BACKEND_URL;\n  }\n  const hostname = window.location.hostname;\n  if (hostname === \"localhost\" || hostname === \"127.0.0.1\") return \"http://localhost:8001\";\n  return \"https://rubrique-study.preview.emergentagent.com\";\n};\n\nconst BACKEND_URL = getBackendUrl();\nconst API_BASE = `${BACKEND_URL.replace(/\\/+$/g, \"\")}/api`;\n\nconst VersetParVersetPage = ({ onGoBack, content, bookInfo }) => {\n  const [currentBatch, setCurrentBatch] = useState(1); // Batch actuel (1, 2, 3...)\n  const [isLoadingMore, setIsLoadingMore] = useState(false);\n  const [allVersetsBatches, setAllVersetsBatches] = useState({}); // Stocke tous les batches chargés\n  const [totalVersetsExpected, setTotalVersetsExpected] = useState(null);\n  const [enrichingVersets, setEnrichingVersets] = useState({}); // Track quels versets sont en cours d'enrichissement\n\n  useEffect(() => {\n    // Quand le contenu arrive, le stocker comme batch 1\n    if (content) {\n      setAllVersetsBatches(prev => ({\n        ...prev,\n        1: content\n      }));\n      setCurrentBatch(1);\n    }\n  }, [content]);\n\n  // Fonction pour enrichir une explication théologique spécifique avec Gemini\n  const enrichirExplicationGemini = async (versetNumber, currentExplication, versetText) => {\n    const enrichKey = `${currentBatch}-${versetNumber}`;\n    \n    if (enrichingVersets[enrichKey]) return; // Déjà en cours\n    \n    setEnrichingVersets(prev => ({...prev, [enrichKey]: true}));\n    \n    try {\n      console.log(`[GEMINI ENRICHISSEMENT] Enrichissement verset ${versetNumber} batch ${currentBatch}`);\n      \n      const apiUrl = `${API_BASE}/generate-verse-by-verse`;\n      \n      const prompt = `ENRICHISSEMENT THÉOLOGIQUE APPROFONDI\n\nVerset biblique : \"${versetText}\"\nExplication actuelle : \"${currentExplication}\"\n\nMISSION : Enrichir et approfondir cette explication théologique avec 200-300 mots supplémentaires.\n\nAJOUTE :\n- Contexte historique et culturel\n- Liens avec d'autres passages bibliques\n- Implications doctrinales profondes\n- Applications pratiques modernes\n- Perspectives herméneutiques\n\nCONSERVE le texte original ET enrichis-le substantiellement.\n\nGÉNÈRE DIRECTEMENT l'explication enrichie complète :`;\n\n      const response = await fetch(apiUrl, {\n        method: 'POST',\n        headers: {'Content-Type': 'application/json'},\n        body: JSON.stringify({\n          passage: `Enrichissement théologique`,\n          version: 'LSG',\n          tokens: 300,\n          use_gemini: true,\n          enriched: true,\n          custom_prompt: prompt\n        })\n      });\n      \n      if (!response.ok) throw new Error(`Erreur API: ${response.status}`);\n      \n      const data = await response.json();\n      \n      if (data.content) {\n        // Remplacer l'explication dans le batch actuel\n        const currentBatchContent = allVersetsBatches[currentBatch];\n        const versetPattern = new RegExp(`(VERSET ${versetNumber}[\\\\s\\\\S]*?EXPLICATION THÉOLOGIQUE[\\\\s\\\\S]*?:)([\\\\s\\\\S]*?)(?=VERSET|$)`, 'i');\n        \n        const enrichedExplication = data.content.replace(/.*EXPLICATION THÉOLOGIQUE.*?:/i, '').trim();\n        const enrichedContent = currentBatchContent.replace(versetPattern, `$1\\n${enrichedExplication}\\n`);\n        \n        // Mettre à jour le batch avec le contenu enrichi\n        setAllVersetsBatches(prev => ({\n          ...prev,\n          [currentBatch]: enrichedContent\n        }));\n        \n        console.log(`[GEMINI ENRICHISSEMENT] Verset ${versetNumber} enrichi avec succès`);\n      }\n      \n    } catch (error) {\n      console.error(`[GEMINI ENRICHISSEMENT] Erreur verset ${versetNumber}:`, error);\n    } finally {\n      setEnrichingVersets(prev => ({...prev, [enrichKey]: false}));\n    }\n  };\n\n  // Fonction pour charger le batch suivant (versets 6-10, 11-15, etc.)\n  const loadNextBatch = async () => {\n    if (isLoadingMore) return;\n    \n    const nextBatch = currentBatch + 1;\n    \n    // Si on a déjà ce batch en cache, l'afficher directement\n    if (allVersetsBatches[nextBatch]) {\n      setCurrentBatch(nextBatch);\n      return;\n    }\n    \n    setIsLoadingMore(true);\n    \n    try {\n      // Calculer le range de versets à demander\n      const startVerse = (nextBatch - 1) * 5 + 1; // Batch 2 = versets 6-10, etc.\n      const endVerse = startVerse + 4;\n      \n      // Extraire le livre et chapitre du bookInfo\n      const bookChapter = bookInfo?.split(':')[0] || 'Genèse 1';\n      const requestPassage = `${bookChapter}:${startVerse}-${endVerse}`;\n      \n      console.log(`[PAGINATION] Chargement batch ${nextBatch}: ${requestPassage}`);\n      \n      // Appeler l'API pour les versets suivants\n      const apiUrl = `${API_BASE}/generate-verse-by-verse`;\n      \n      const response = await fetch(apiUrl, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          passage: requestPassage,\n          version: 'LSG',\n          tokens: 500,\n          use_gemini: true,\n          enriched: true\n        })\n      });\n      \n      if (!response.ok) {\n        throw new Error(`Erreur API: ${response.status}`);\n      }\n      \n      const data = await response.json();\n      \n      if (data.content) {\n        // Stocker le nouveau batch\n        setAllVersetsBatches(prev => ({\n          ...prev,\n          [nextBatch]: data.content\n        }));\n        setCurrentBatch(nextBatch);\n        console.log(`[PAGINATION] Batch ${nextBatch} chargé avec succès`);\n      } else {\n        throw new Error('Pas de contenu reçu');\n      }\n      \n    } catch (error) {\n      console.error(`[PAGINATION] Erreur chargement batch ${nextBatch}:`, error);\n      // Optionnel : afficher une erreur à l'utilisateur\n    } finally {\n      setIsLoadingMore(false);\n    }\n  };\n\n  // Fonction pour naviguer vers un batch précédent\n  const goToPreviousBatch = () => {\n    if (currentBatch > 1) {\n      setCurrentBatch(currentBatch - 1);\n    }\n  };\n\n  // Obtenir le contenu du batch actuel\n  const getCurrentBatchContent = () => {\n    return allVersetsBatches[currentBatch] || '';\n  };\n\n  // Fonction pour gérer l'enrichissement d'un verset via React (pas via HTML onclick)\n  const handleEnrichirVerset = async (versetNumber) => {\n    console.log(`[GEMINI] Clic enrichissement verset ${versetNumber}`);\n    \n    // Extraire le texte du verset et l'explication actuelle\n    const currentContent = getCurrentBatchContent();\n    const versetRegex = new RegExp(`VERSET ${versetNumber}[\\\\s\\\\S]*?TEXTE BIBLIQUE[\\\\s\\\\S]*?:([\\\\s\\\\S]*?)EXPLICATION THÉOLOGIQUE[\\\\s\\\\S]*?:([\\\\s\\\\S]*?)(?=VERSET|$)`, 'i');\n    const match = currentContent.match(versetRegex);\n    \n    if (match) {\n      const versetText = match[1].trim();\n      const currentExplication = match[2].trim();\n      \n      await enrichirExplicationGemini(versetNumber, currentExplication, versetText);\n    }\n  };\n  \n  // Fonction pour nettoyer les marqueurs Markdown\n  const cleanMarkdownFormatting = (text) => {\n    if (!text) return '';\n    \n    return text\n      // Supprimer les ** pour le gras\n      .replace(/\\*\\*/g, '')\n      // Supprimer les * pour l'italique\n      .replace(/(?<!\\*)\\*(?!\\*)/g, '')\n      // Nettoyer les espaces multiples\n      .replace(/\\s+/g, ' ')\n      // Nettoyer les lignes vides multiples\n      .replace(/\\n\\s*\\n\\s*\\n/g, '\\n\\n')\n      .trim();\n  };\n\n  // Nouvelle approche : Analyser le contenu et créer des composants React avec boutons intégrés\n  const parseContentWithGeminiButtons = (content) => {\n    if (!content) return [];\n    \n    const sections = [];\n    const versetPattern = /(\\*\\*VERSET\\s+(\\d+)\\*\\*[\\s\\S]*?)(?=\\*\\*VERSET\\s+\\d+|$)/gi;\n    \n    let match;\n    while ((match = versetPattern.exec(content)) !== null) {\n      const versetNumber = parseInt(match[2]);\n      const versetContent = match[1].trim();\n      \n      // Séparer le contenu en parties\n      const parts = versetContent.split(/(\\*\\*TEXTE BIBLIQUE\\s*:\\*\\*|\\*\\*EXPLICATION THÉOLOGIQUE\\s*:\\*\\*)/i);\n      \n      let versetTitle = '';\n      let texteContent = '';\n      let explicationContent = '';\n      \n      for (let i = 0; i < parts.length; i++) {\n        const part = parts[i].trim();\n        \n        if (part.includes('**VERSET')) {\n          versetTitle = cleanMarkdownFormatting(part);\n        } else if (part.match(/TEXTE BIBLIQUE/i)) {\n          texteContent = cleanMarkdownFormatting(parts[i + 1]?.trim() || '');\n          i++; // Skip next part as we've consumed it\n        } else if (part.match(/\\*\\*EXPLICATION THÉOLOGIQUE/i)) {\n          explicationContent = cleanMarkdownFormatting(parts[i + 1]?.trim() || '');\n          i++; // Skip next part as we've consumed it\n        }\n      }\n      \n      sections.push({\n        number: versetNumber,\n        title: versetTitle,\n        texte: texteContent,\n        explication: explicationContent\n      });\n    }\n    \n    return sections;\n  };\n\n  // Fonction pour extraire les numéros de versets du contenu\n  const extractVersetNumbers = (content) => {\n    if (!content) return [];\n    \n    const versetPattern = /\\*\\*VERSET\\s+(\\d+)\\*\\*/gi;\n    const matches = [];\n    let match;\n    \n    while ((match = versetPattern.exec(content)) !== null) {\n      matches.push(parseInt(match[1]));\n    }\n    \n    return matches;\n  };\n\n  // Fonction pour formater intelligemment l'explication théologique\n  const formatExplicationTheologique = (text) => {\n    if (!text) return '';\n    \n    // Décoder les entités HTML pour éviter l'affichage de code CSS brut\n    let formattedText = text\n      .replace(/&lt;/g, '<')\n      .replace(/&gt;/g, '>')\n      .replace(/&quot;/g, '\"')\n      .replace(/&#x27;/g, \"'\")\n      .replace(/&amp;/g, '&');\n    \n    // Nettoyer COMPLÈTEMENT tous les styles CSS qui peuvent apparaître en texte brut\n    formattedText = formattedText\n      .replace(/style=\"[^\"]*\"/g, '') // Supprimer tous les attributs style\n      .replace(/background:\\s*linear-gradient\\([^)]*\\);?/g, '') // Supprimer les CSS linear-gradient\n      .replace(/color:\\s*white\\s*!important;?/g, '') // Supprimer color: white\n      .replace(/font-weight:\\s*\\d+\\s*!important;?/g, '') // Supprimer font-weight\n      .replace(/padding:\\s*[^;]*;?/g, '') // Supprimer padding\n      .replace(/border-radius:\\s*[^;]*;?/g, '') // Supprimer border-radius  \n      .replace(/text-shadow:\\s*[^;]*;?/g, '') // Supprimer text-shadow\n      .replace(/[^>]*\">/g, '>') // Nettoyer les remnants de balises\n      .replace(/>\\s*\"/g, '>') // Nettoyer les guillemets orphelins\n      .replace(/\"\\s*</g, '<'); // Nettoyer les guillemets orphelins\n    \n    // 1. Rendre les références bibliques cliquables (simplifié, sans style inline)\n    const referencePattern = /(Genèse|Exode|Lévitique|Nombres|Deutéronome|Josué|Juges|Ruth|1 Samuel|2 Samuel|1 Rois|2 Rois|1 Chroniques|2 Chroniques|Esdras|Néhémie|Esther|Job|Psaumes|Proverbes|Ecclésiaste|Cantique|Ésaïe|Jérémie|Lamentations|Ézéchiel|Daniel|Osée|Joël|Amos|Abdias|Jonas|Michée|Nahum|Habacuc|Sophonie|Aggée|Zacharie|Malachie|Matthieu|Marc|Luc|Jean|Actes|Romains|1 Corinthiens|2 Corinthiens|Galates|Éphésiens|Philippiens|Colossiens|1 Thessaloniciens|2 Thessaloniciens|1 Timothée|2 Timothée|Tite|Philémon|Hébreux|Jacques|1 Pierre|2 Pierre|1 Jean|2 Jean|3 Jean|Jude|Apocalypse)\\s+(\\d+):(\\d+(?:-\\d+)?)/g;\n    \n    formattedText = formattedText.replace(referencePattern, (match, livre, chapitre, verset) => {\n      const searchQuery = encodeURIComponent(`${livre} ${chapitre}:${verset}`);\n      return `<a href=\"https://www.bible.com/search/bible?q=${searchQuery}\" target=\"_blank\" class=\"bible-reference\" title=\"Cliquer pour lire ce verset sur YouVersion\">${match}</a>`;\n    });\n    \n    // 2. Mettre en gras les concepts théologiques importants (utiliser des classes CSS)\n    const conceptsTheologiques = [\n      'bénédiction divine', 'volonté de Dieu', 'fils de Dieu', 'filles d\\'hommes',\n      'croissance démographique', 'lignée de Seth', 'lignée de Caïn',\n      'application pratique', 'sur le plan spirituel', 'contexte historique',\n      'signification théologique', 'enseignement biblique', 'principe biblique',\n      'perspective chrétienne', 'vérité spirituelle', 'message divin',\n      'révélation divine', 'sagesse divine', 'justice divine', 'miséricorde divine',\n      'alliance divine', 'promesse divine', 'amour de Dieu', 'grâce divine',\n      'royaume de Dieu', 'peuple élu', 'salut', 'rédemption', 'sanctification',\n      'justification', 'régénération', 'conversion', 'repentance', 'foi',\n      'espérance', 'charité', 'humilité', 'obéissance', 'soumission',\n      'témoignage chrétien', 'vie chrétienne', 'disciple', 'discipleship'\n    ];\n    \n    conceptsTheologiques.forEach(concept => {\n      const regex = new RegExp(`(${concept})`, 'gi');\n      formattedText = formattedText.replace(regex, '<strong class=\"theological-concept\">$1</strong>');\n    });\n    \n    // 3. Mettre en gras les expressions importantes entre guillemets\n    formattedText = formattedText.replace(/\"([^\"]+)\"/g, '<strong class=\"quoted-text\">\"$1\"</strong>');\n    \n    // 4. Mettre en évidence les phrases de conclusion/application\n    const conclusionPatterns = [\n      /(L'application pratique [^.]+\\.)/gi,\n      /(En conclusion[^.]+\\.)/gi,\n      /(Ainsi[^.]+\\.)/gi,\n      /(Par conséquent[^.]+\\.)/gi,\n      /(Il en résulte [^.]+\\.)/gi,\n      /(Cela nous enseigne [^.]+\\.)/gi,\n      /(Nous pouvons donc [^.]+\\.)/gi,\n      /(Cette vérité nous [^.]+\\.)/gi\n    ];\n    \n    conclusionPatterns.forEach(pattern => {\n      formattedText = formattedText.replace(pattern, '<span style=\"background: #10b981; color: white !important; font-weight: 700 !important; font-style: italic; padding: 3px 8px; border-radius: 6px; display: inline-block; margin: 2px; text-shadow: 0 1px 2px rgba(0,0,0,0.3);\">$1</span>');\n    });\n    \n    // 5. Mettre en gras les mots-clés doctrinaux\n    const motsClesDoctrinaux = [\n      'fécondité', 'procréation', 'sexualité', 'mariage', 'famille',\n      'responsabilité', 'intendance', 'dégénérescence', 'corruption',\n      'péché', 'chute', 'rachat', 'restauration', 'nouvelle création',\n      'esprit', 'âme', 'corps', 'trinité', 'incarnation', 'résurrection'\n    ];\n    \n    motsClesDoctrinaux.forEach(mot => {\n      const regex = new RegExp(`\\\\b(${mot})\\\\b`, 'gi');\n      formattedText = formattedText.replace(regex, '<span style=\"background: #ef4444; color: white !important; padding: 2px 5px; border-radius: 4px; font-weight: 700 !important; text-shadow: 0 1px 1px rgba(0,0,0,0.4); border: 1px solid rgba(255,255,255,0.2);\">$1</span>');\n    });\n    \n    return formattedText;\n  };\n\n  return (\n    <div style={{\n      minHeight: '100vh',\n      background: 'linear-gradient(135deg, rgba(248, 250, 252, 0.98) 0%, rgba(241, 245, 249, 0.95) 50%, rgba(248, 250, 252, 0.98) 100%)',\n      fontFamily: 'Inter, -apple-system, BlinkMacSystemFont, sans-serif'\n    }}>\n      {/* En-tête moderne */}\n      <div style={{\n        background: 'linear-gradient(135deg, rgba(139, 92, 246, 0.95) 0%, rgba(124, 58, 237, 0.98) 100%)',\n        color: 'white',\n        padding: '30px 20px',\n        boxShadow: '0 8px 32px rgba(139, 92, 246, 0.25)',\n        position: 'sticky',\n        top: 0,\n        zIndex: 100,\n        overflow: 'hidden'\n      }}>\n        <div style={{\n          position: 'absolute',\n          top: 0,\n          left: 0,\n          right: 0,\n          bottom: 0,\n          background: 'linear-gradient(45deg, rgba(255, 255, 255, 0.1) 0%, transparent 50%, rgba(255, 255, 255, 0.05) 100%)',\n          pointerEvents: 'none'\n        }}></div>\n        \n        <div style={{\n          maxWidth: '900px',\n          margin: '0 auto',\n          position: 'relative',\n          zIndex: 10\n        }}>\n          <button \n            onClick={onGoBack}\n            style={{\n              background: 'rgba(255, 255, 255, 0.2)',\n              border: '1px solid rgba(255, 255, 255, 0.3)',\n              color: 'white',\n              padding: '10px 20px',\n              borderRadius: '12px',\n              cursor: 'pointer',\n              fontSize: '14px',\n              fontWeight: '600',\n              marginBottom: '20px',\n              backdropFilter: 'blur(10px)',\n              transition: 'all 0.3s ease'\n            }}\n            onMouseOver={(e) => {\n              e.target.style.background = 'rgba(255, 255, 255, 0.3)';\n              e.target.style.transform = 'translateY(-2px)';\n            }}\n            onMouseOut={(e) => {\n              e.target.style.background = 'rgba(255, 255, 255, 0.2)';\n              e.target.style.transform = 'translateY(0)';\n            }}\n          >\n            ← Retour à l'Étude\n          </button>\n          \n          <div style={{\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n            gap: '20px',\n            flexWrap: 'wrap',\n            marginBottom: '8px'\n          }}>\n            <h1 style={{\n              fontSize: 'clamp(1.8rem, 4vw, 2.5rem)',\n              fontWeight: '800',\n              margin: 0,\n              textShadow: '0 2px 8px rgba(0, 0, 0, 0.1)',\n              textAlign: 'center'\n            }}>\n              📖 Étude Verset par Verset\n            </h1>\n\n            {/* Boutons de contrôle */}\n            <div style={{\n              display: 'flex',\n              alignItems: 'center',\n              gap: '12px',\n              flexWrap: 'wrap'\n            }}>\n              {/* Bouton Gemini */}\n              <button \n                onClick={() => window.open('https://gemini.google.com/', '_blank')}\n                style={{\n                  background: 'linear-gradient(135deg, #8b5cf6, #7c3aed)',\n                  border: 'none',\n                  borderRadius: '10px',\n                  color: 'white',\n                  padding: '8px 14px',\n                  fontSize: '12px',\n                  fontWeight: '600',\n                  cursor: 'pointer',\n                  transition: 'all 0.3s ease',\n                  boxShadow: '0 3px 10px rgba(139, 92, 246, 0.3)',\n                  fontFamily: 'Montserrat, sans-serif'\n                }}\n                onMouseOver={(e) => {\n                  e.target.style.transform = 'translateY(-1px)';\n                  e.target.style.boxShadow = '0 4px 15px rgba(139, 92, 246, 0.4)';\n                }}\n                onMouseOut={(e) => {\n                  e.target.style.transform = 'translateY(0px)';\n                  e.target.style.boxShadow = '0 3px 10px rgba(139, 92, 246, 0.3)';\n                }}\n              >\n                🤖 Gemini\n              </button>\n\n              {/* Bouton Prise de Note */}\n              <button \n                onClick={() => {\n                  // Navigation vers la page de notes\n                  if (onGoBack) {\n                    // Retourner à la page principale puis naviguer vers les notes\n                    onGoBack();\n                    setTimeout(() => {\n                      // Simuler le clic sur prise de note de la page principale\n                      window.dispatchEvent(new CustomEvent('navigate-to-notes'));\n                    }, 100);\n                  }\n                }}\n                style={{\n                  background: 'linear-gradient(135deg, #10b981, #059669)',\n                  border: 'none',\n                  borderRadius: '10px',\n                  color: 'white',\n                  padding: '8px 14px',\n                  fontSize: '12px',\n                  fontWeight: '600',\n                  cursor: 'pointer',\n                  transition: 'all 0.3s ease',\n                  boxShadow: '0 3px 10px rgba(16, 185, 129, 0.3)',\n                  fontFamily: 'Montserrat, sans-serif',\n                  textAlign: 'center'\n                }}\n                onMouseOver={(e) => {\n                  e.target.style.transform = 'translateY(-1px)';\n                  e.target.style.boxShadow = '0 4px 15px rgba(16, 185, 129, 0.4)';\n                }}\n                onMouseOut={(e) => {\n                  e.target.style.transform = 'translateY(0px)';\n                  e.target.style.boxShadow = '0 3px 10px rgba(16, 185, 129, 0.3)';\n                }}\n              >\n                📝 Prise de Note\n              </button>\n\n              {/* Bouton ChatGPT */}\n              <button \n                onClick={() => window.open('https://chatgpt.com/', '_blank')}\n                style={{\n                  background: 'linear-gradient(135deg, #f59e0b, #d97706)',\n                  border: 'none',\n                  borderRadius: '10px',\n                  color: 'white',\n                  padding: '8px 14px',\n                  fontSize: '12px',\n                  fontWeight: '600',\n                  cursor: 'pointer',\n                  transition: 'all 0.3s ease',\n                  boxShadow: '0 3px 10px rgba(245, 158, 11, 0.3)',\n                  fontFamily: 'Montserrat, sans-serif',\n                  textAlign: 'center'\n                }}\n                onMouseOver={(e) => {\n                  e.target.style.transform = 'translateY(-1px)';\n                  e.target.style.boxShadow = '0 4px 15px rgba(245, 158, 11, 0.4)';\n                }}\n                onMouseOut={(e) => {\n                  e.target.style.transform = 'translateY(0px)';\n                  e.target.style.boxShadow = '0 3px 10px rgba(245, 158, 11, 0.3)';\n                }}\n              >\n                💬 ChatGPT\n              </button>\n\n              {/* Bouton Lire la Bible */}\n              <button \n                onClick={() => window.open('https://www.bible.com/', '_blank')}\n                style={{\n                  background: 'linear-gradient(135deg, #3b82f6, #2563eb)',\n                  border: 'none',\n                  borderRadius: '10px',\n                  color: 'white',\n                  padding: '8px 14px',\n                  fontSize: '12px',\n                  fontWeight: '600',\n                  cursor: 'pointer',\n                  transition: 'all 0.3s ease',\n                  boxShadow: '0 3px 10px rgba(59, 130, 246, 0.3)',\n                  fontFamily: 'Montserrat, sans-serif',\n                  textAlign: 'center'\n                }}\n                onMouseOver={(e) => {\n                  e.target.style.transform = 'translateY(-1px)';\n                  e.target.style.boxShadow = '0 4px 15px rgba(59, 130, 246, 0.4)';\n                }}\n                onMouseOut={(e) => {\n                  e.target.style.transform = 'translateY(0px)';\n                  e.target.style.boxShadow = '0 3px 10px rgba(59, 130, 246, 0.3)';\n                }}\n              >\n                📖 Lire la Bible\n              </button>\n\n              {/* Bouton API avec LEDs physiques - Composant centralisé */}\n              <ApiControlPanel backendUrl={process.env.REACT_APP_BACKEND_URL || \"http://localhost:8001\"} />\n            </div>\n          </div>\n          \n          {bookInfo && (\n            <div style={{\n              fontSize: 'clamp(1rem, 3vw, 1.2rem)',\n              textAlign: 'center',\n              opacity: 0.9,\n              fontWeight: '500'\n            }}>\n              {bookInfo} • Batch {currentBatch} (versets {(currentBatch - 1) * 5 + 1}-{currentBatch * 5})\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Contenu principal avec optimisation mobile */}\n      <div style={{\n        maxWidth: '900px',\n        margin: '0 auto',\n        padding: '20px',\n        // Optimisation mobile : padding plus petit sur mobile\n        '@media (maxWidth: 768px)': {\n          padding: '15px'\n        }\n      }}>\n        {getCurrentBatchContent() ? (\n          <div style={{\n            background: 'white',\n            borderRadius: '16px',\n            padding: 'clamp(20px, 5vw, 40px)',\n            boxShadow: '0 8px 32px rgba(0, 0, 0, 0.08)',\n            border: '1px solid rgba(226, 232, 240, 0.8)',\n            lineHeight: '1.7',\n            fontSize: 'clamp(15px, 4vw, 16px)',\n            marginBottom: '20px'\n          }}>\n            {/* Nouveau rendu avec boutons intégrés */}\n            {parseContentWithGeminiButtons(getCurrentBatchContent()).map((section, index) => (\n              <div key={section.number} style={{ marginBottom: '40px' }}>\n                {/* Titre du verset */}\n                <div className=\"verset-header\">\n                  {section.title}\n                </div>\n                \n                {/* Texte biblique */}\n                {section.texte && (\n                  <>\n                    <div className=\"texte-biblique-label\">TEXTE BIBLIQUE :</div>\n                    <div style={{ \n                      marginBottom: '20px', \n                      padding: '10px 0',\n                      color: '#374151'\n                    }}>\n                      {section.texte}\n                    </div>\n                  </>\n                )}\n                \n                {/* Explication théologique avec bouton Gemini intégré */}\n                {section.explication && (\n                  <>\n                    <div style={{\n                      display: 'flex',\n                      alignItems: 'center',\n                      justifyContent: 'space-between',\n                      gap: '15px',\n                      marginBottom: '16px',\n                      flexWrap: 'wrap'\n                    }}>\n                      <div className=\"explication-label\" style={{ flex: '1', minWidth: '200px' }}>\n                        EXPLICATION THÉOLOGIQUE :\n                      </div>\n                      \n                      {/* Bouton Gemini à droite de l'explication */}\n                      <button \n                        onClick={() => handleEnrichirVerset(section.number)}\n                        disabled={enrichingVersets[`${currentBatch}-${section.number}`]}\n                        style={{\n                          background: enrichingVersets[`${currentBatch}-${section.number}`]\n                            ? 'linear-gradient(135deg, #94a3b8 0%, #64748b 100%)'\n                            : 'linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%)',\n                          color: 'white',\n                          border: 'none',\n                          padding: 'clamp(8px, 2vw, 12px) clamp(12px, 3vw, 18px)',\n                          borderRadius: '8px',\n                          fontSize: 'clamp(12px, 3vw, 14px)',\n                          fontWeight: '600',\n                          cursor: enrichingVersets[`${currentBatch}-${section.number}`] ? 'not-allowed' : 'pointer',\n                          transition: 'all 0.3s ease',\n                          boxShadow: '0 3px 12px rgba(139, 92, 246, 0.25)',\n                          whiteSpace: 'nowrap',\n                          flexShrink: 0,\n                          opacity: enrichingVersets[`${currentBatch}-${section.number}`] ? 0.7 : 1\n                        }}\n                        onMouseOver={(e) => {\n                          if (!enrichingVersets[`${currentBatch}-${section.number}`]) {\n                            e.target.style.transform = 'translateY(-1px)';\n                            e.target.style.boxShadow = '0 4px 16px rgba(139, 92, 246, 0.35)';\n                          }\n                        }}\n                        onMouseOut={(e) => {\n                          if (!enrichingVersets[`${currentBatch}-${section.number}`]) {\n                            e.target.style.transform = 'translateY(0)';\n                            e.target.style.boxShadow = '0 3px 12px rgba(139, 92, 246, 0.25)';\n                          }\n                        }}\n                      >\n                        {enrichingVersets[`${currentBatch}-${section.number}`] \n                          ? '⏳ Gemini...' \n                          : '🤖 Gemini gratuit'\n                        }\n                      </button>\n                    </div>\n                    \n                    {/* Contenu de l'explication avec formatage intelligent */}\n                    <div \n                      style={{ \n                        color: '#374151',\n                        lineHeight: '1.7',\n                        marginBottom: '10px',\n                        fontSize: '15px',\n                        textAlign: 'justify'\n                      }}\n                      dangerouslySetInnerHTML={{\n                        __html: formatExplicationTheologique(section.explication)\n                      }}\n                    />\n                    \n                    {/* Indicateur de chargement */}\n                    {enrichingVersets[`${currentBatch}-${section.number}`] && (\n                      <div style={{\n                        display: 'flex',\n                        alignItems: 'center',\n                        gap: '8px',\n                        marginTop: '12px',\n                        color: '#6b7280',\n                        fontSize: 'clamp(12px, 3vw, 14px)',\n                        justifyContent: 'center',\n                        padding: '10px',\n                        background: 'rgba(139, 92, 246, 0.05)',\n                        borderRadius: '8px'\n                      }}>\n                        <div style={{\n                          width: '16px',\n                          height: '16px',\n                          border: '2px solid #e5e7eb',\n                          borderTop: '2px solid #8b5cf6',\n                          borderRadius: '50%',\n                          animation: 'spin 1s linear infinite'\n                        }}></div>\n                        Enrichissement en cours avec Gemini...\n                      </div>\n                    )}\n                  </>\n                )}\n              </div>\n            ))}\n            \n            {/* Boutons de navigation */}\n            <div style={{\n              display: 'flex',\n              gap: '15px',\n              marginTop: '40px',\n              justifyContent: 'center',\n              flexWrap: 'wrap'\n            }}>\n              {/* Bouton Précédent */}\n              {currentBatch > 1 && (\n                <button\n                  onClick={goToPreviousBatch}\n                  style={{\n                    background: 'linear-gradient(135deg, #6b7280 0%, #4b5563 100%)',\n                    color: 'white',\n                    border: 'none',\n                    padding: 'clamp(12px, 3vw, 16px) clamp(20px, 5vw, 32px)',\n                    borderRadius: '12px',\n                    fontSize: 'clamp(14px, 3.5vw, 16px)',\n                    fontWeight: '600',\n                    cursor: 'pointer',\n                    transition: 'all 0.3s ease',\n                    boxShadow: '0 4px 16px rgba(107, 114, 128, 0.25)',\n                    minWidth: '140px'\n                  }}\n                  onMouseOver={(e) => {\n                    e.target.style.transform = 'translateY(-2px)';\n                    e.target.style.boxShadow = '0 6px 24px rgba(107, 114, 128, 0.35)';\n                  }}\n                  onMouseOut={(e) => {\n                    e.target.style.transform = 'translateY(0)';\n                    e.target.style.boxShadow = '0 4px 16px rgba(107, 114, 128, 0.25)';\n                  }}\n                >\n                  ◀ Précédent\n                </button>\n              )}\n\n              {/* Bouton Suivant */}\n              <button\n                onClick={loadNextBatch}\n                disabled={isLoadingMore}\n                style={{\n                  background: isLoadingMore \n                    ? 'linear-gradient(135deg, #94a3b8 0%, #64748b 100%)'\n                    : 'linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%)',\n                  color: 'white',\n                  border: 'none',\n                  padding: 'clamp(12px, 3vw, 16px) clamp(20px, 5vw, 32px)',\n                  borderRadius: '12px',\n                  fontSize: 'clamp(14px, 3.5vw, 16px)',\n                  fontWeight: '600',\n                  cursor: isLoadingMore ? 'not-allowed' : 'pointer',\n                  transition: 'all 0.3s ease',\n                  boxShadow: '0 4px 16px rgba(139, 92, 246, 0.25)',\n                  minWidth: '140px',\n                  opacity: isLoadingMore ? 0.7 : 1\n                }}\n                onMouseOver={(e) => {\n                  if (!isLoadingMore) {\n                    e.target.style.transform = 'translateY(-2px)';\n                    e.target.style.boxShadow = '0 6px 24px rgba(139, 92, 246, 0.35)';\n                  }\n                }}\n                onMouseOut={(e) => {\n                  if (!isLoadingMore) {\n                    e.target.style.transform = 'translateY(0)';\n                    e.target.style.boxShadow = '0 4px 16px rgba(139, 92, 246, 0.25)';\n                  }\n                }}\n              >\n                {isLoadingMore ? '⏳ Chargement...' : 'Suivant ▶'}\n              </button>\n            </div>\n\n            {/* Indicateur de progression */}\n            <div style={{\n              textAlign: 'center',\n              marginTop: '20px',\n              fontSize: 'clamp(12px, 3vw, 14px)',\n              color: '#6b7280'\n            }}>\n              📖 Batch {currentBatch} • Versets {(currentBatch - 1) * 5 + 1} à {currentBatch * 5}\n            </div>\n            \n            {/* Styles CSS intégrés pour les couleurs */}\n            <style>\n              {`\n                .verset-header {\n                  background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%);\n                  color: white;\n                  font-size: clamp(1.2rem, 4vw, 1.4rem);\n                  font-weight: 800;\n                  padding: clamp(12px, 3vw, 16px) clamp(16px, 4vw, 24px);\n                  border-radius: 12px;\n                  margin: clamp(24px, 6vw, 32px) 0 clamp(16px, 4vw, 20px) 0;\n                  text-align: center;\n                  box-shadow: 0 4px 16px rgba(139, 92, 246, 0.25);\n                  text-transform: uppercase;\n                  letter-spacing: 1px;\n                }\n                \n                .texte-biblique-label {\n                  background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);\n                  color: white;\n                  font-size: clamp(1rem, 3.5vw, 1.1rem);\n                  font-weight: 700;\n                  padding: clamp(10px, 3vw, 12px) clamp(16px, 4vw, 20px);\n                  border-radius: 10px;\n                  margin: clamp(20px, 5vw, 24px) 0 clamp(12px, 3vw, 16px) 0;\n                  box-shadow: 0 4px 12px rgba(59, 130, 246, 0.25);\n                  text-transform: uppercase;\n                  letter-spacing: 0.5px;\n                }\n                \n                .explication-label {\n                  background: linear-gradient(135deg, #f97316 0%, #ea580c 100%);\n                  color: white;\n                  font-size: clamp(1rem, 3.5vw, 1.1rem);\n                  font-weight: 700;\n                  padding: clamp(10px, 3vw, 12px) clamp(16px, 4vw, 20px);\n                  border-radius: 10px;\n                  margin: clamp(20px, 5vw, 24px) 0 clamp(12px, 3vw, 16px) 0;\n                  \n                /* Styles pour les éléments formatés */\n                .theological-concept {\n                  background: linear-gradient(135deg, #8b5cf6, #7c3aed);\n                  color: white !important;\n                  font-weight: 800 !important;\n                  padding: 2px 6px;\n                  border-radius: 4px;\n                  text-shadow: 0 1px 2px rgba(0,0,0,0.5);\n                }\n                \n                .quoted-text {\n                  background: #f59e0b;\n                  color: white !important;\n                  font-weight: 700 !important;\n                  font-style: italic;\n                  padding: 1px 4px;\n                  border-radius: 3px;\n                  text-shadow: 0 1px 1px rgba(0,0,0,0.3);\n                }\n                \n                .bible-reference {\n                  color: #8b5cf6 !important;\n                  text-decoration: underline;\n                  font-weight: 600;\n                  cursor: pointer;\n                }\n                \n                .bible-reference:hover {\n                  color: #7c3aed !important;\n                }\n                  box-shadow: 0 4px 12px rgba(249, 115, 22, 0.25);\n                  text-transform: uppercase;\n                  letter-spacing: 0.5px;\n                }\n                \n                .verset-content p {\n                  margin-bottom: clamp(16px, 4vw, 18px);\n                  line-height: 1.7;\n                  font-size: clamp(15px, 4vw, 16px);\n                }\n                \n                .verset-content br {\n                  line-height: 1.7;\n                }\n                \n                /* Animation spin pour les loadings */\n                @keyframes spin {\n                  0% { transform: rotate(0deg); }\n                  100% { transform: rotate(360deg); }\n                }\n                \n                /* Responsive mobile - lecture optimisée */\n                @media (max-width: 768px) {\n                  .verset-header {\n                    margin: 20px 0 16px 0;\n                    border-radius: 8px;\n                  }\n                  \n                  .texte-biblique-label,\n                  .explication-label {\n                    margin: 16px 0 12px 0;\n                    border-radius: 8px;\n                  }\n                  \n                  .verset-content p {\n                    margin-bottom: 14px;\n                    text-align: left;\n                  }\n                }\n                \n                /* Styles pour très petits écrans */\n                @media (max-width: 480px) {\n                  .verset-header {\n                    font-size: 1.1rem;\n                    padding: 10px 14px;\n                  }\n                  \n                  .texte-biblique-label,\n                  .explication-label {\n                    font-size: 0.95rem;\n                    padding: 8px 14px;\n                  }\n                }\n              `}\n            </style>\n          </div>\n        ) : (\n          <div style={{\n            background: 'white',\n            borderRadius: '20px',\n            padding: 'clamp(40px, 8vw, 60px)',\n            textAlign: 'center',\n            boxShadow: '0 12px 40px rgba(0, 0, 0, 0.08)'\n          }}>\n            <div style={{\n              fontSize: 'clamp(3rem, 8vw, 4rem)',\n              marginBottom: '20px'\n            }}>📖</div>\n            <h2 style={{\n              fontSize: 'clamp(1.5rem, 5vw, 2rem)',\n              color: '#1f2937',\n              marginBottom: '16px',\n              fontWeight: '700'\n            }}>\n              Prêt pour l'Étude Verset par Verset\n            </h2>\n            <p style={{\n              color: '#6b7280',\n              fontSize: 'clamp(1rem, 3vw, 1.1rem)',\n              maxWidth: '500px',\n              margin: '0 auto',\n              lineHeight: '1.6'\n            }}>\n              Sélectionnez un passage biblique depuis la page principale pour commencer une étude approfondie verset par verset avec explications théologiques.\n              <br /><br />\n              <strong>Nouveau :</strong> 5 versets par batch avec navigation fluide !\n            </p>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default VersetParVersetPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}